import{r as i,j as C}from"./iframe-CTdvD1WV.js";import"./UniverseProvider-Clsb9xh4.js";import{b as N}from"./Bem-DDAe-1K0.js";import{c as k,d as H,a as x}from"./Optional-DSwtTfFR.js";const M=(t,n)=>{let e=null;const s=()=>{k(e)||(clearTimeout(e),e=null)};return{cancel:s,throttle:(...a)=>{s(),e=setTimeout(()=>{e=null,t.apply(null,a)},n)}}},P=i.createContext(null),T=()=>{const t=i.useContext(P);if(t===null)throw new Error("Dropdown compound components must be rendered within the Dropdown component");return t},S=(t,n,e)=>t==="top"?n.top-e.top:e.bottom-n.bottom,I=(t,n,e)=>t==="left"?n.left-e.left:e.right-n.right,V=({anchorRect:t,anchoredContainerRect:n,side:e,align:s,gap:l,boundaryRect:a=document.documentElement.getBoundingClientRect()})=>{if(e==="top"||e==="bottom"){const o=S(e,t,a),f=e==="top"?t.top-n.height-l:t.bottom+l;let p=t.left;return s==="center"&&(p=t.left+t.width/2-n.width/2),s==="end"&&(p=t.right-n.width),{maxHeight:`${o}px`,top:`${f}px`,left:`${p}px`}}if(e==="left"||e==="right"){const o=I(e,t,a),f=e==="left"?t.left-n.width-l:t.right+l;let p=t.top;return s==="center"&&(p=t.top-n.width/2+t.width/2),s==="end"&&(p=t.bottom-n.height),{maxWidth:`${o}px`,top:`${p}px`,left:`${f}px`}}return{}},$=(t,n)=>{var e;return((e=t.current)==null?void 0:e.contains(n))??!1},w=({children:t,...n})=>{const{triggerRef:e,side:s,align:l,gap:a,contentRef:o,triggerEvents:f,debouncedHideHoverablePopover:p,isOpen:r,setIsOpen:u}=T(),[c,d]=i.useState({opacity:"0"}),m=i.useCallback(g=>{u(g.newState==="open")},[u]),_=i.useCallback(()=>{if(x(e.current)&&x(o.current)){const g=document.documentElement.getBoundingClientRect(),v=e.current.getBoundingClientRect(),h=o.current.getBoundingClientRect();d({opacity:"1",...V({anchorRect:v,anchoredContainerRect:h,side:s,align:l,gap:a,boundaryRect:g})})}},[o,e,l,s,a]);return i.useEffect(()=>{const g=o.current;if(g===null)return;const v=h=>{var y;m(h),h.newState==="closed"&&((y=e.current)==null||y.focus())};return g.addEventListener("toggle",v),()=>{g.removeEventListener("toggle",v)}},[o,e,m]),i.useEffect(()=>{r?_():d({opacity:"0"})},[r,_]),C.jsx("div",{popover:"auto",className:N("tox-dropdown-content"),ref:o,style:{...c},...f.includes("hover")&&{onMouseLeave:p.throttle,onMouseEnter:()=>p.cancel()},...n,children:r&&t})},b=({children:t})=>{const{triggerRef:n,contentRef:e,triggerEvents:s,debouncedHideHoverablePopover:l,isOpen:a}=T();let o=i.Children.toArray(t)[0];if(!i.isValidElement(o))return null;o=o;const f={onMouseEnter:r=>{var u,c,d;(c=(u=o.props).onMouseEnter)==null||c.call(u,r),l.cancel(),(d=e.current)==null||d.showPopover()},onMouseLeave:r=>{var u,c;(c=(u=o.props).onMouseLeave)==null||c.call(u,r),l.throttle(r)}},p={onClick:r=>{var u,c,d,m;(c=(u=o.props).onClick)==null||c.call(u,r),a?(d=e.current)==null||d.hidePopover():(m=e.current)==null||m.showPopover()}};return i.cloneElement(o,{ref:r=>{n.current=r,H(o.props.ref)?o.props.ref(r):x(o.props.ref)&&(o.props.ref.current=r)},...s.includes("click")&&p,...s.includes("hover")&&f})},E=({children:t,side:n="top",align:e="start",gap:s=8,triggerEvents:l=["click"]})=>{const a=i.useRef(),o=i.useRef(null),[f,p]=i.useState(!1),r=i.useMemo(()=>M(c=>{var d;(!(c.relatedTarget instanceof Node)||!$(o,c.relatedTarget))&&((d=o.current)==null||d.hidePopover())},300),[]),u=i.useMemo(()=>({triggerRef:a,contentRef:o,side:n,align:e,gap:s,triggerEvents:l,debouncedHideHoverablePopover:r,isOpen:f,setIsOpen:p}),[a,o,n,e,s,l,r,f]);return C.jsx(P.Provider,{value:u,children:t})};try{E.displayName="Root",E.__docgenInfo={description:"",displayName:"Root",props:{side:{defaultValue:{value:"top"},description:"",name:"side",required:!1,type:{name:'"left" | "right" | "top" | "bottom"'}},align:{defaultValue:{value:"start"},description:"",name:"align",required:!1,type:{name:'"start" | "center" | "end"'}},gap:{defaultValue:{value:"8"},description:"",name:"gap",required:!1,type:{name:"number"}},triggerEvents:{defaultValue:{value:"[ 'click' ]"},description:"",name:"triggerEvents",required:!1,type:{name:'("click" | "hover")[]'}}}}}catch{}try{w.displayName="Content",w.__docgenInfo={description:"",displayName:"Content",props:{}}}catch{}try{b.displayName="Trigger",b.__docgenInfo={description:"",displayName:"Trigger",props:{}}}catch{}export{w as C,E as R,b as T};
