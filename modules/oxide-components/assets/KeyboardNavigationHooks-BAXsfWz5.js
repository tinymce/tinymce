import{t as pe,O as d,d as we,b as Ee,e as K,f as ve,g as ge,h as Te,a as Se,c as T,j as be,k as De,n as H}from"./Optional-Bk48EtMP.js";import{r as I}from"./iframe-ztYUIhTB.js";import{m as Me,t as ke,a as Ne,b as J,f as Q,c as xe,d as Ke,g as D,r as A}from"./Strings-ChBvWd27.js";const Pe=typeof window<"u"?window:Function("return this;")(),Re=(e,t,o,n)=>{const s=e+t;return s>n?o:s<o?n:s},Le=(e,t,o)=>Math.min(Math.max(e,t),o),Ct=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295,Ae=(e,t,o=pe)=>e.exists(n=>o(n,t)),Y=(e,t)=>e?d.some(t):d.none(),Fe=(e,t)=>{let o=t??Pe;for(let n=0;n<e.length&&o!==void 0&&o!==null;++n)o=o[e[n]];return o},Z=(e,t)=>{const o=e.split(".");return Fe(o,t)},He=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,e),new Error(s)}return M(n.childNodes[0])},Ie=(e,t)=>{const n=(t||document).createElement(e);return M(n)},Oe=(e,t)=>{const n=(t||document).createTextNode(e);return M(n)},M=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},_e=(e,t,o)=>d.from(e.dom.elementFromPoint(t,o)).map(M),E={fromHtml:He,fromTag:Ie,fromText:Oe,fromDom:M,fromPoint:_e},Ve=9,C=11,O=1,$e=3,ee=(e,t)=>{const o=e.dom;if(o.nodeType!==O)return!1;{const n=o;if(n.matches!==void 0)return n.matches(t);if(n.msMatchesSelector!==void 0)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==void 0)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==void 0)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},te=e=>e.nodeType!==O&&e.nodeType!==Ve&&e.nodeType!==C||e.childElementCount===0,Ue=(e,t)=>{const o=t===void 0?document:t.dom;return te(o)?[]:Me(o.querySelectorAll(e),E.fromDom)},ze=(e,t)=>{const o=t===void 0?document:t.dom;return te(o)?d.none():d.from(o.querySelector(e)).map(E.fromDom)},_=(e,t)=>e.dom===t.dom,Be=(e,t)=>Z(e,t),qe=(e,t)=>{const o=Be(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},je=Object.getPrototypeOf,Ge=e=>qe("HTMLElement",e),We=e=>{const t=Z("ownerDocument.defaultView",e);return we(e)&&(Ge(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(je(e).constructor.name))},Xe=e=>e.dom.nodeName.toLowerCase(),Je=e=>e.dom.nodeType,V=e=>t=>Je(t)===e,eo=e=>Qe(e)&&We(e.dom),Qe=V(O),Ye=V($e),Ze=V(C),Ce=e=>d.from(e.dom.parentNode).map(E.fromDom),et=e=>Ce(e),tt=(e,t)=>{const o=e.dom.childNodes;return d.from(o[t]).map(E.fromDom)},ot=e=>tt(e,0),nt=e=>Ze(e)&&Ee(e.dom.host),oe=e=>E.fromDom(e.dom.getRootNode()),st=e=>{const t=oe(e);return nt(t)?d.some(t):d.none()},rt=e=>E.fromDom(e.dom.host),ct=()=>E.fromDom(document),to=(e,t=!1)=>e.dom.focus({preventScroll:t}),ut=(e=ct())=>d.from(e.dom.activeElement).map(E.fromDom),at=e=>ut(oe(e)).filter(t=>e.dom.contains(t.dom)),ne=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},lt=(e,t)=>d.from(ne(e,t)),dt=(e,t)=>{e.dom.removeAttribute(t)},P=e=>e.style!==void 0&&K(e.style.getPropertyValue),$=e=>{const t=Ye(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return st(E.fromDom(t)).fold(()=>o.body.contains(t),ve($,rt))},it=(e,t,o)=>{if(!ge(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);P(e)&&e.style.setProperty(t,o)},mt=(e,t)=>{P(e)&&e.style.removeProperty(t)},oo=(e,t,o)=>{const n=e.dom;it(n,t,o)},F=(e,t)=>{const o=e.dom,s=window.getComputedStyle(o).getPropertyValue(t);return s===""&&!$(e)?ft(o,t):s},ft=(e,t)=>P(e)?e.style.getPropertyValue(t):"",no=(e,t)=>{const o=e.dom;mt(o,t),Ae(lt(e,"style").map(ke),"")&&dt(e,"style")},ht=(e,t)=>{const o=(c,l)=>{if(!Te(l)&&!l.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+l);const r=c.dom;P(r)&&(r.style[e]=l+"px")},n=c=>{const l=t(c);if(l<=0||l===null){const r=F(c,e);return parseFloat(r)||0}return l},s=n,u=(c,l)=>Ne(l,(r,a)=>{const p=F(c,a),g=p===void 0?0:parseInt(p,10);return isNaN(g)?r:r+g},0);return{set:o,get:n,getOuter:s,aggregate:u,max:(c,l,r)=>{const a=u(c,r);return l>a?l-a:0}}},yt=ht("height",e=>{const t=e.dom;return $(e)?t.getBoundingClientRect().height:t.offsetHeight}),pt=e=>yt.get(e),wt=e=>e.offsetWidth<=0&&e.offsetHeight<=0,Et=e=>!wt(e.dom),se=(e,t)=>o=>vt(o)==="rtl"?t:e,vt=e=>F(e,"direction")==="rtl"?"rtl":"ltr",gt=(e,t,o,n,s)=>e(o,n)?d.some(o):K(s)&&s(o)?d.none():t(o,n,s),Tt=(e,t,o)=>{let n=e.dom;const s=K(o)?o:Se;for(;n.parentNode;){n=n.parentNode;const u=E.fromDom(n);if(t(u))return d.some(u);if(s(u))break}return d.none()},St=(e,t,o)=>Tt(e,n=>ee(n,t),o),bt=(e,t)=>ze(t,e),re=(e,t,o)=>gt((s,u)=>ee(s,u),St,e,t,o),U=(e,t)=>Ue(t,e),ce=e=>(t,o,n)=>{const s=e(t);return kt(s,t,o,n)},Dt=(e,t)=>{const o=se(e,t);return ce(o)},Mt=(e,t)=>{const o=se(t,e);return ce(o)},kt=(e,t,o,n)=>n.focusManager.get(t).bind(u=>e(t,u,n)).map(u=>(n.focusManager.set(t,u),!0)),Nt=(e,t)=>J(e,t).map(o=>({index:o,candidates:e})),xt=(e,t,o)=>{const n=y=>_(y,t),s=U(e,o),u=Q(s,Et);return Nt(u,n)},ue=(e,t,o,n,s)=>{const u=c=>Xe(c)==="button"&&ne(c,"disabled")==="disabled",y=(c,l,r)=>s(c,l,n,0,r.length-1,r[l],a=>u(r[a])?y(c,a,r):d.from(r[a]));return xt(e,o,t).bind(c=>{const l=c.index,r=c.candidates;return y(l,l,r)})},Kt=(e,t,o,n)=>ue(e,t,o,n,(s,u,y,c,l,r,a)=>{const p=Le(u+y,c,l);return p===s?d.from(r):a(p)}),Pt=(e,t,o,n)=>ue(e,t,o,n,(s,u,y,c,l,r,a)=>{const p=Re(u,y,c,l);return p===s?d.none():a(p)}),Rt=()=>({get:o=>at(o),set:(o,n)=>{n.dom.focus()}});var ae=(e=>(e.OnFocusMode="onFocus",e))(ae||{});const m=e=>t=>Ke(e,o=>o.code===t.code||o.key===t.key||o.which===t.which),S=e=>t=>xe(e,o=>o(t)),N=e=>e.shiftKey===!0,W=e=>!N(e),f=(e,t)=>({matches:e,classification:t}),Lt=(e,t)=>D(e,n=>n.matches(t)).map(n=>n.classification),z=(e,t,o,n)=>{const s={...e,focusManager:Rt(),focusInside:ae.OnFocusMode,focusIn:n},u=(r,a,p)=>{const g=p(r,a,s);return Lt(g,a).bind(k=>k(r,a,s))};return{handleKeydown:(r,a)=>u(r,a,t).each(p=>{a.preventDefault(),a.stopPropagation()}),handleKeyup:(r,a)=>u(r,a,o).each(()=>{a.preventDefault(),a.stopPropagation()}),handleFocus:(r,a)=>{n(s).each(p=>{p(r,s),a.preventDefault(),a.stopPropagation()})}}},b=[{code:"Tab",key:"Tab",which:9}],x=[{code:"Enter",key:"Enter",which:13}],le=[{code:"ArrowLeft",key:"ArrowLeft",which:37}],de=[{code:"ArrowUp",key:"ArrowUp",which:38}],ie=[{code:"ArrowRight",key:"ArrowRight",which:39}],me=[{code:"ArrowDown",key:"ArrowDown",which:40}],B=[{code:"Space",key:" ",which:32}],q=[{code:"Escape",key:"Escape",which:27}],At=(e,t)=>{const o=i=>(i.dom.click(),d.some(!0)),n=(i,w)=>w.closest?w.focusManager.get(i).bind(h=>re(h,w.selector)):w.focusManager.get(i),s=(i,w,h)=>n(i,h).bind(v=>h.execute(v)),u=(i,w,h)=>n(i,h).bind(v=>h.escape(v)),y=(i,w)=>{bt(i,w.selector).each(h=>{w.focusManager.set(i,h)})},c=i=>(w,h,v)=>(v.cycles?Pt:Kt)(w,v.selector,h,i),l=c(-1),r=c(1),a=i=>(w,h,v)=>i(w,h,v),p=(i,w,h)=>{const v=[...h.allowHorizontal?le:[]].concat(h.allowVertical?de:[]),G=[...h.allowHorizontal?ie:[]].concat(h.allowVertical?me:[]);return[f(m(v),a(Dt(l,r))),f(m(G),a(Mt(l,r))),f(m(x),s),f(m(B),s),f(m(q),u)]},g=T([]),k={execute:o,escape:T(d.none()),allowVertical:!0,allowHorizontal:!0,cycles:!0,focusIn:!1,closest:!0,...t},L=z(k,p,g,()=>Y(k.focusIn,y));return{keydown:i=>L.handleKeydown(e,i),keyup:i=>L.handleKeyup(e,i),focus:i=>L.handleFocus(e,i)}},Ft=(e,t)=>{const o=(c,l,r)=>[f(S([N,m(x)]),r.onShiftEnter),f(S([W,m(x)]),r.onEnter),f(S([N,m(b)]),r.onShiftTab),f(S([W,m(b)]),r.onTab),f(m(de),r.onUp),f(m(me),r.onDown),f(m(le),r.onLeft),f(m(ie),r.onRight),f(m(B),r.onSpace)],n=(c,l,r)=>[f(m(q),r.onEscape)],s=c=>()=>K(c)?(c(),d.some(!0)):d.none(),u={onSpace:s(t.onSpace),onEnter:s(t.onEnter),onShiftEnter:s(t.onShiftEnter),onTab:s(t.onTab),onShiftTab:s(t.onShiftTab),onLeft:s(t.onLeft),onRight:s(t.onRight),onUp:s(t.onUp),onDown:s(t.onDown),onEscape:s(t.onEscape)},y=z(u,o,n,()=>d.none());return{keydown:c=>y.handleKeydown(e,c),keyup:c=>y.handleKeyup(e,c),focus:c=>y.handleFocus(e,c)}},Ht=(e,t,o)=>{const n=A(e.slice(0,t)),s=A(e.slice(t+1));return D(n.concat(s),o)},It=(e,t,o)=>{const n=A(e.slice(0,t));return D(n,o)},Ot=(e,t,o)=>{const n=e.slice(0,t),s=e.slice(t+1);return D(s.concat(n),o)},_t=(e,t,o)=>{const n=e.slice(t+1);return D(n,o)},Vt=e=>pt(e)>0,$t=(e,t)=>{const o=U(e,t.selector),n=Q(o,s=>Vt(s));return d.from(n[t.firstTabstop])},R=(e,t)=>t.closest?t.focusManager.get(e).bind(o=>re(o,t.selector)):t.focusManager.get(e),Ut=(e,t)=>e.useTabstopAt(t),zt=e=>et(e).bind(ot).exists(t=>_(t,e)),Bt=(e,t)=>{$t(e,t).each(o=>t.focusManager.set(e,o))},qt=(e,t,o,n,s)=>s(t,o,u=>Ut(n,u)).fold(()=>n.cyclic?d.some(!0):d.none(),u=>(n.focusManager.set(e,u),d.some(!0))),fe=(e,t,o,n)=>{const s=U(e,o.selector);return R(e,o).bind(u=>J(s,De(_,u)).bind(c=>qt(e,s,c,o,n)))},he=(e,t,o)=>{const n=o.cyclic?Ht:It;return fe(e,t,o,n)},ye=(e,t,o)=>{const n=o.cyclic?Ot:_t;return fe(e,t,o,n)},jt=(e,t,o)=>R(e,o).filter(n=>!o.useTabstopAt(n)).bind(n=>(zt(n)?he:ye)(e,t,o)),X=(e,t,o)=>R(e,o).bind(n=>o.execute(n)),Gt=(e,t,o)=>R(e,o).bind(n=>o.escape(n)),Wt=T([f(S([N,m(b)]),he),f(m(b),ye),f(m(x),X),f(m(B),X),f(m(q),Gt)]),Xt=T([f(m(b),jt)]),Jt=(e,t)=>{const o={execute:T(d.none()),escape:T(d.none()),firstTabstop:0,useTabstopAt:be,cyclic:!0,focusIn:!1,closest:!0,...t},n=z(o,Wt,Xt,()=>Y(o.focusIn,Bt));return{keydown:s=>n.handleKeydown(e,s),keyup:s=>n.handleKeyup(e,s),focus:s=>n.handleFocus(e,s)}},j=(e,t)=>(e==null||e.addEventListener("keydown",t.keydown),e==null||e.addEventListener("keyup",t.keyup),e==null||e.addEventListener("focus",t.focus),()=>{e==null||e.removeEventListener("keydown",t.keydown),e==null||e.removeEventListener("keyup",t.keyup),e==null||e.removeEventListener("focus",t.focus)}),so=e=>{I.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=Jt(E.fromDom(t.current),e);return j(t.current,o)}else return H},[])},ro=e=>{I.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=At(E.fromDom(t.current),e);return j(t.current,o)}else return H},[])},co=e=>{I.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=Ft(E.fromDom(t.current),e);return j(t.current,o)}else return H},[e])};export{E as S,to as a,so as b,no as c,bt as d,ro as e,ot as f,U as g,eo as i,Ce as p,Ct as r,oo as s,co as u};
