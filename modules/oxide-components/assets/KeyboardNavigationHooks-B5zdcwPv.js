import{O as l,f as Te,a as ge,d as R,e as Se,g as be}from"./Optional-CHj922Ci.js";import{r as F}from"./iframe-Dt7rryTP.js";import{t as De,b as ke,a as Me,c as g,d as Ne,e as xe,n as P}from"./Fun--VEwoXIw.js";import{m as Ke,t as Re,a as Fe,b as Pe,c as He,d as N,g as Y,f as Z,r as _}from"./Strings-D6HyETGk.js";const Le=typeof window<"u"?window:Function("return this;")(),Ae=(e,t,o,n)=>{const s=e+t;return s>n?o:s<o?n:s},Ie=(e,t,o)=>Math.min(Math.max(e,t),o),ao=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295,Oe=(e,t,o=De)=>e.exists(n=>o(n,t)),ee=(e,t)=>e?l.some(t):l.none(),_e=(e,t)=>{let o=t??Le;for(let n=0;n<e.length&&o!==void 0&&o!==null;++n)o=o[e[n]];return o},te=(e,t)=>{const o=e.split(".");return _e(o,t)},Ve=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,e),new Error(s)}return x(n.childNodes[0])},$e=(e,t)=>{const n=(t||document).createElement(e);return x(n)},Ue=(e,t)=>{const n=(t||document).createTextNode(e);return x(n)},x=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ze=(e,t,o)=>l.from(e.dom.elementFromPoint(t,o)).map(x),E={fromHtml:Ve,fromTag:$e,fromText:Ue,fromDom:x,fromPoint:ze},Be=9,oe=11,$=1,qe=3,ne=(e,t)=>{const o=e.dom;if(o.nodeType!==$)return!1;{const n=o;if(n.matches!==void 0)return n.matches(t);if(n.msMatchesSelector!==void 0)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==void 0)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==void 0)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},se=e=>e.nodeType!==$&&e.nodeType!==Be&&e.nodeType!==oe||e.childElementCount===0,je=(e,t)=>{const o=t===void 0?document:t.dom;return se(o)?[]:Ke(o.querySelectorAll(e),E.fromDom)},Ge=(e,t)=>{const o=t===void 0?document:t.dom;return se(o)?l.none():l.from(o.querySelector(e)).map(E.fromDom)},U=(e,t)=>e.dom===t.dom,We=(e,t)=>te(e,t),Ce=(e,t)=>{const o=We(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},Xe=Object.getPrototypeOf,Je=e=>Ce("HTMLElement",e),Qe=e=>{const t=te("ownerDocument.defaultView",e);return Te(e)&&(Je(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Xe(e).constructor.name))},re=e=>e.dom.nodeName.toLowerCase(),Ye=e=>e.dom.nodeType,z=e=>t=>Ye(t)===e,lo=e=>ce(e)&&Qe(e.dom),ce=z($),Ze=z(qe),et=z(oe),ue=e=>t=>ce(t)&&re(t)===e,tt=e=>l.from(e.dom.parentNode).map(E.fromDom),ot=e=>tt(e),nt=(e,t)=>{const o=e.dom.childNodes;return l.from(o[t]).map(E.fromDom)},st=e=>nt(e,0),rt=e=>et(e)&&ge(e.dom.host),ae=e=>E.fromDom(e.dom.getRootNode()),ct=e=>{const t=ae(e);return rt(t)?l.some(t):l.none()},ut=e=>E.fromDom(e.dom.host),at=()=>E.fromDom(document),io=(e,t=!1)=>e.dom.focus({preventScroll:t}),dt=(e=at())=>l.from(e.dom.activeElement).map(E.fromDom),lt=e=>dt(ae(e)).filter(t=>e.dom.contains(t.dom)),B=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},it=(e,t)=>l.from(B(e,t)),mt=(e,t)=>{e.dom.removeAttribute(t)},H=e=>e.style!==void 0&&R(e.style.getPropertyValue),q=e=>{const t=Ze(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return ct(E.fromDom(t)).fold(()=>o.body.contains(t),ke(q,ut))},ft=(e,t,o)=>{if(!Se(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);H(e)&&e.style.setProperty(t,o)},yt=(e,t)=>{H(e)&&e.style.removeProperty(t)},mo=(e,t,o)=>{const n=e.dom;ft(n,t,o)},V=(e,t)=>{const o=e.dom,s=window.getComputedStyle(o).getPropertyValue(t);return s===""&&!q(e)?ht(o,t):s},ht=(e,t)=>H(e)?e.style.getPropertyValue(t):"",fo=(e,t)=>{const o=e.dom;yt(o,t),Oe(it(e,"style").map(Re),"")&&mt(e,"style")},pt=(e,t)=>{const o=(c,d)=>{if(!be(d)&&!d.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+d);const r=c.dom;H(r)&&(r.style[e]=d+"px")},n=c=>{const d=t(c);if(d<=0||d===null){const r=V(c,e);return parseFloat(r)||0}return d},s=n,u=(c,d)=>Fe(d,(r,a)=>{const i=V(c,a),T=i===void 0?0:parseInt(i,10);return isNaN(T)?r:r+T},0);return{set:o,get:n,getOuter:s,aggregate:u,max:(c,d,r)=>{const a=u(c,r);return d>a?d-a:0}}},wt=pt("height",e=>{const t=e.dom;return q(e)?t.getBoundingClientRect().height:t.offsetHeight}),Et=e=>wt.get(e),vt=e=>e.offsetWidth<=0&&e.offsetHeight<=0,Tt=e=>!vt(e.dom),de=(e,t)=>o=>gt(o)==="rtl"?t:e,gt=e=>V(e,"direction")==="rtl"?"rtl":"ltr",St=(e,t,o,n,s)=>e(o,n)?l.some(o):R(s)&&s(o)?l.none():t(o,n,s),bt=(e,t,o)=>{let n=e.dom;const s=R(o)?o:Me;for(;n.parentNode;){n=n.parentNode;const u=E.fromDom(n);if(t(u))return l.some(u);if(s(u))break}return l.none()},Dt=(e,t,o)=>bt(e,n=>ne(n,t),o),kt=(e,t)=>Ge(t,e),le=(e,t,o)=>St((s,u)=>ne(s,u),Dt,e,t,o),j=(e,t)=>je(t,e),Mt=()=>({get:o=>lt(o),set:(o,n)=>{n.dom.focus()}});var ie=(e=>(e.OnFocusMode="onFocus",e))(ie||{});const m=e=>t=>He(e,o=>o.code===t.code||o.key===t.key||o.which===t.which),b=e=>t=>Pe(e,o=>o(t)),K=e=>e.shiftKey===!0,Nt=e=>e.ctrlKey===!0,X=e=>!K(e),f=(e,t)=>({matches:e,classification:t}),xt=(e,t)=>N(e,n=>n.matches(t)).map(n=>n.classification),L=(e,t,o,n)=>{const s={...e,focusManager:Mt(),focusInside:ie.OnFocusMode,focusIn:n},u=(r,a,i)=>{const T=i(r,a,s);return xt(T,a).bind(S=>S(r,a,s))};return{handleKeydown:(r,a)=>u(r,a,t).each(i=>{a.preventDefault(),a.stopPropagation()}),handleKeyup:(r,a)=>u(r,a,o).each(()=>{a.preventDefault(),a.stopPropagation()}),handleFocus:(r,a)=>{n(s).each(i=>{i(r,s),a.preventDefault(),a.stopPropagation()})}}},k=[{code:"Tab",key:"Tab",which:9}],D=[{code:"Enter",key:"Enter",which:13}],me=[{code:"ArrowLeft",key:"ArrowLeft",which:37}],fe=[{code:"ArrowUp",key:"ArrowUp",which:38}],ye=[{code:"ArrowRight",key:"ArrowRight",which:39}],G=[{code:"ArrowDown",key:"ArrowDown",which:40}],M=[{code:"Space",key:" ",which:32}],W=[{code:"Escape",key:"Escape",which:27}],Kt=ue("input"),Rt=e=>B(e,"type")!=="radio",Ft=ue("textarea"),J=e=>Kt(e)&&Rt(e)||Ft(e),Pt=()=>l.some(!0),Ht=(e,t)=>{const o={...t},n=(i,T,S)=>S.doExecute(i,T),s=t.useSpace&&!J(e)?M:[],u=t.useEnter?D:[],h=t.useDown?G:[],c=s.concat(u).concat(h),d=g([f(m(c),n)].concat(t.useControlEnter?[f(b([Nt,m(D)]),n)]:[])),r=g(t.useSpace&&!J(e)?[f(m(M),Pt)]:[]),a=L(o,d,r,()=>l.none());return{keydown:i=>a.handleKeydown(e,i),keyup:i=>a.handleKeyup(e,i),focus:i=>a.handleFocus(e,i)}},he=e=>(t,o,n)=>{const s=e(t);return It(s,t,o,n)},Lt=(e,t)=>{const o=de(e,t);return he(o)},At=(e,t)=>{const o=de(t,e);return he(o)},It=(e,t,o,n)=>n.focusManager.get(t).bind(u=>e(t,u,n)).map(u=>(n.focusManager.set(t,u),!0)),Ot=(e,t)=>Y(e,t).map(o=>({index:o,candidates:e})),_t=(e,t,o)=>{const n=h=>U(h,t),s=j(e,o),u=Z(s,Tt);return Ot(u,n)},pe=(e,t,o,n,s)=>{const u=c=>re(c)==="button"&&B(c,"disabled")==="disabled",h=(c,d,r)=>s(c,d,n,0,r.length-1,r[d],a=>u(r[a])?h(c,a,r):l.from(r[a]));return _t(e,o,t).bind(c=>{const d=c.index,r=c.candidates;return h(d,d,r)})},Vt=(e,t,o,n)=>pe(e,t,o,n,(s,u,h,c,d,r,a)=>{const i=Ie(u+h,c,d);return i===s?l.from(r):a(i)}),$t=(e,t,o,n)=>pe(e,t,o,n,(s,u,h,c,d,r,a)=>{const i=Ae(u,h,c,d);return i===s?l.none():a(i)}),Ut=(e,t)=>{const o=y=>(y.dom.click(),l.some(!0)),n=(y,w)=>w.closest?w.focusManager.get(y).bind(p=>le(p,w.selector)):w.focusManager.get(y),s=(y,w,p)=>n(y,p).bind(v=>p.execute(v)),u=(y,w,p)=>n(y,p).bind(v=>p.escape(v)),h=(y,w)=>{kt(y,w.selector).each(p=>{w.focusManager.set(y,p)})},c=y=>(w,p,v)=>(v.cycles?$t:Vt)(w,v.selector,p,y),d=c(-1),r=c(1),a=y=>(w,p,v)=>y(w,p,v),i=(y,w,p)=>{const v=[...p.allowHorizontal?me:[]].concat(p.allowVertical?fe:[]),C=[...p.allowHorizontal?ye:[]].concat(p.allowVertical?G:[]);return[f(m(v),a(Lt(d,r))),f(m(C),a(At(d,r))),f(m(D),s),f(m(M),s),f(m(W),u)]},T=g([]),S={execute:o,escape:g(l.none()),allowVertical:!0,allowHorizontal:!0,cycles:!0,focusIn:!1,closest:!0,...t},O=L(S,i,T,()=>ee(S.focusIn,h));return{keydown:y=>O.handleKeydown(e,y),keyup:y=>O.handleKeyup(e,y),focus:y=>O.handleFocus(e,y)}},zt=(e,t)=>{const o=(c,d,r)=>[f(b([K,m(D)]),r.onShiftEnter),f(b([X,m(D)]),r.onEnter),f(b([K,m(k)]),r.onShiftTab),f(b([X,m(k)]),r.onTab),f(m(fe),r.onUp),f(m(G),r.onDown),f(m(me),r.onLeft),f(m(ye),r.onRight),f(m(M),r.onSpace)],n=(c,d,r)=>[f(m(W),r.onEscape)],s=c=>()=>R(c)?(c(),l.some(!0)):l.none(),u={onSpace:s(t.onSpace),onEnter:s(t.onEnter),onShiftEnter:s(t.onShiftEnter),onTab:s(t.onTab),onShiftTab:s(t.onShiftTab),onLeft:s(t.onLeft),onRight:s(t.onRight),onUp:s(t.onUp),onDown:s(t.onDown),onEscape:s(t.onEscape)},h=L(u,o,n,()=>l.none());return{keydown:c=>h.handleKeydown(e,c),keyup:c=>h.handleKeyup(e,c),focus:c=>h.handleFocus(e,c)}},Bt=(e,t,o)=>{const n=_(e.slice(0,t)),s=_(e.slice(t+1));return N(n.concat(s),o)},qt=(e,t,o)=>{const n=_(e.slice(0,t));return N(n,o)},jt=(e,t,o)=>{const n=e.slice(0,t),s=e.slice(t+1);return N(s.concat(n),o)},Gt=(e,t,o)=>{const n=e.slice(t+1);return N(n,o)},Wt=e=>Et(e)>0,Ct=(e,t)=>{const o=j(e,t.selector),n=Z(o,s=>Wt(s));return l.from(n[t.firstTabstop])},A=(e,t)=>t.closest?t.focusManager.get(e).bind(o=>le(o,t.selector)):t.focusManager.get(e),Xt=(e,t)=>e.useTabstopAt(t),Jt=e=>ot(e).bind(st).exists(t=>U(t,e)),Qt=(e,t)=>{Ct(e,t).each(o=>t.focusManager.set(e,o))},Yt=(e,t,o,n,s)=>s(t,o,u=>Xt(n,u)).fold(()=>n.cyclic?l.some(!0):l.none(),u=>(n.focusManager.set(e,u),l.some(!0))),we=(e,t,o,n)=>{const s=j(e,o.selector);return A(e,o).bind(u=>Y(s,xe(U,u)).bind(c=>Yt(e,s,c,o,n)))},Ee=(e,t,o)=>{const n=o.cyclic?Bt:qt;return we(e,t,o,n)},ve=(e,t,o)=>{const n=o.cyclic?jt:Gt;return we(e,t,o,n)},Zt=(e,t,o)=>A(e,o).filter(n=>!o.useTabstopAt(n)).bind(n=>(Jt(n)?Ee:ve)(e,t,o)),Q=(e,t,o)=>A(e,o).bind(n=>o.execute(n)),eo=(e,t,o)=>A(e,o).bind(n=>o.escape(n)),to=g([f(b([K,m(k)]),Ee),f(m(k),ve),f(m(D),Q),f(m(M),Q),f(m(W),eo)]),oo=g([f(m(k),Zt)]),no=(e,t)=>{const o={execute:g(l.none()),escape:g(l.none()),firstTabstop:0,useTabstopAt:Ne,cyclic:!0,focusIn:!1,closest:!0,...t},n=L(o,to,oo,()=>ee(o.focusIn,Qt));return{keydown:s=>n.handleKeydown(e,s),keyup:s=>n.handleKeyup(e,s),focus:s=>n.handleFocus(e,s)}},I=(e,t)=>(e==null||e.addEventListener("keydown",t.keydown),e==null||e.addEventListener("keyup",t.keyup),e==null||e.addEventListener("focus",t.focus),()=>{e==null||e.removeEventListener("keydown",t.keydown),e==null||e.removeEventListener("keyup",t.keyup),e==null||e.removeEventListener("focus",t.focus)}),yo=e=>{F.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=no(E.fromDom(t.current),e);return I(t.current,o)}else return P},[])},ho=e=>{F.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=Ut(E.fromDom(t.current),e);return I(t.current,o)}else return P},[])},po=e=>{F.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=zt(E.fromDom(t.current),e);return I(t.current,o)}else return P},[e])},wo=e=>{F.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=Ht(E.fromDom(t.current),e);return I(t.current,o)}else return P},[])};export{E as S,fo as a,io as b,po as c,kt as d,yo as e,st as f,V as g,ho as h,lo as i,j,tt as p,ao as r,mo as s,wo as u};
