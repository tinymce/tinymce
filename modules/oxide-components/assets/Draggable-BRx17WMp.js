import{r as n,j as h}from"./iframe-Bs-Z778B.js";import{c as $,O as k}from"./Optional-CLt1CVr3.js";const I=(t,e)=>({deltaX:e.x-t.x,deltaY:e.y-t.y}),R=(t,e,r)=>Math.min(r,Math.max(e,t)),j=(t,e,r,o)=>{const c=t.x+t.width,a=t.y+t.height;return{x:{min:Math.ceil(r.x+(e.x-t.x)),max:Math.floor(o.x-(c-e.x))},y:{min:Math.ceil(r.y+(e.y-t.y)),max:Math.floor(o.y-(a-e.y))}}},M=n.createContext(null),H=()=>{const t=n.useContext(M);if(t===null)throw new Error("Draggable compound components must be rendered within the Draggable component");return t},v=t=>`translate3d(${t.x}px, ${t.y}px, 0px)`,b=t=>"x"in t?{top:`${t.y}px`,left:`${t.x}px`}:t,P=(t,e)=>e.fold($(t),({width:r,height:o})=>({top:`min(${t.top}, calc(100% - ${o}))`,left:`min(${t.left}, calc(100% - ${r}))`})),E=(t,e,r,o)=>r?{transform:v(t),...P(b(e),o)}:P(b(e),o),_=n.forwardRef(({children:t,style:e,initialPosition:r={top:0,left:0},declaredSize:o,...c},a)=>{const[l,d]=n.useState({x:0,y:0}),[p,g]=n.useState(r),[x,m]=n.useState(!1),f=n.useRef(null),y=E(l,p,x,k.from(o)),s=n.useMemo(()=>({setShift:d,draggableRef:f,isDragging:x,setIsDragging:m,setPosition:g}),[x]),i=n.useCallback(u=>{typeof a=="function"?a(u):a&&(a.current=u),f.current=u},[a]);return h.jsx(M.Provider,{value:s,children:h.jsx("div",{ref:i,style:{...e,...y},...c,children:t})})}),C=({children:t})=>{const e=n.useRef(null),r=n.useRef({x:0,y:0}),o=n.useRef({x:{min:0,max:0},y:{min:0,max:0}}),{setShift:c,draggableRef:a,isDragging:l,setIsDragging:d,setPosition:p}=H(),g=n.useCallback(()=>{if(d(!1),c({x:0,y:0}),a.current!==null){const s=a.current.getBoundingClientRect();p({x:Math.round(s.left),y:Math.round(s.top)})}},[d,c,a,p]),x=n.useCallback(s=>{if(a.current===null)return;d(!0),e.current=s.target,e.current.setPointerCapture(s.pointerId);const i={x:Math.round(s.clientX),y:Math.round(s.clientY)};r.current=i;const u=a.current.getBoundingClientRect();o.current=j(u,i,{x:0,y:0},{x:window.innerWidth,y:window.innerHeight})},[a,d]),m=n.useCallback(s=>{if(l){const i={x:R(Math.round(s.clientX),o.current.x.min,o.current.x.max),y:R(Math.round(s.clientY),o.current.y.min,o.current.y.max)},{deltaX:u,deltaY:S}=I(r.current,i);r.current=i,c(({x:w,y:D})=>({x:w+u,y:D+S}))}},[l,c]),f=n.useCallback(s=>{var i;(i=e.current)==null||i.releasePointerCapture(s.pointerId),g()},[g]),y=n.useCallback(()=>{l&&g()},[g,l]);return h.jsx("div",{onPointerDown:x,onPointerUp:f,onPointerMove:m,onLostPointerCapture:y,style:{cursor:l?"grabbing":"grab",userSelect:"none"},children:t})};try{_.displayName="Root",_.__docgenInfo={description:"",displayName:"Root",props:{popover:{defaultValue:null,description:"",name:"popover",required:!1,type:{name:'"auto" | "hint" | "manual"'}},initialPosition:{defaultValue:{value:"{ top: 0, left: 0 }"},description:"",name:"initialPosition",required:!1,type:{name:"CssPosition"}},declaredSize:{defaultValue:null,description:"",name:"declaredSize",required:!1,type:{name:"CssSize"}}}}}catch{}try{C.displayName="Handle",C.__docgenInfo={description:"",displayName:"Handle",props:{}}}catch{}export{C as H,_ as R};
