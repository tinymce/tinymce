import{O as l,g as ge,a as Te,e as L,c as Se,f as ke}from"./Optional-DGH8Y1w3.js";import{r as N}from"./iframe-M6edC993.js";import{t as De,b as be,a as Me,c as g,d as Ne,e as Ke,n as K}from"./Fun--VEwoXIw.js";import{m as xe,t as Re,a as Fe,b as He,d as Pe,g as x,h as Y,f as Z,r as $}from"./Strings-CkeB91LW.js";const Le=typeof window<"u"?window:Function("return this;")(),Ae=(e,t,o,n)=>{const s=e+t;return s>n?o:s<o?n:s},Ie=(e,t,o)=>Math.min(Math.max(e,t),o),lo=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295,Oe=(e,t,o=De)=>e.exists(n=>o(n,t)),ee=(e,t)=>e?l.some(t):l.none(),_e=(e,t)=>{let o=t??Le;for(let n=0;n<e.length&&o!==void 0&&o!==null;++n)o=o[e[n]];return o},te=(e,t)=>{const o=e.split(".");return _e(o,t)},$e=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,e),new Error(s)}return R(n.childNodes[0])},Ve=(e,t)=>{const n=(t||document).createElement(e);return R(n)},Ue=(e,t)=>{const n=(t||document).createTextNode(e);return R(n)},R=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ze=(e,t,o)=>l.from(e.dom.elementFromPoint(t,o)).map(R),w={fromHtml:$e,fromTag:Ve,fromText:Ue,fromDom:R,fromPoint:ze},Be=9,oe=11,U=1,qe=3,ne=(e,t)=>{const o=e.dom;if(o.nodeType!==U)return!1;{const n=o;if(n.matches!==void 0)return n.matches(t);if(n.msMatchesSelector!==void 0)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==void 0)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==void 0)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},se=e=>e.nodeType!==U&&e.nodeType!==Be&&e.nodeType!==oe||e.childElementCount===0,je=(e,t)=>{const o=t===void 0?document:t.dom;return se(o)?[]:xe(o.querySelectorAll(e),w.fromDom)},Ge=(e,t)=>{const o=t===void 0?document:t.dom;return se(o)?l.none():l.from(o.querySelector(e)).map(w.fromDom)},z=(e,t)=>e.dom===t.dom,We=(e,t)=>te(e,t),Ce=(e,t)=>{const o=We(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},Xe=Object.getPrototypeOf,Je=e=>Ce("HTMLElement",e),Qe=e=>{const t=te("ownerDocument.defaultView",e);return ge(e)&&(Je(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Xe(e).constructor.name))},re=e=>e.dom.nodeName.toLowerCase(),Ye=e=>e.dom.nodeType,B=e=>t=>Ye(t)===e,io=e=>ce(e)&&Qe(e.dom),ce=B(U),Ze=B(qe),et=B(oe),ue=e=>t=>ce(t)&&re(t)===e,tt=e=>l.from(e.dom.parentNode).map(w.fromDom),ot=e=>tt(e),nt=(e,t)=>{const o=e.dom.childNodes;return l.from(o[t]).map(w.fromDom)},st=e=>nt(e,0),rt=e=>et(e)&&Te(e.dom.host),ae=e=>w.fromDom(e.dom.getRootNode()),ct=e=>{const t=ae(e);return rt(t)?l.some(t):l.none()},ut=e=>w.fromDom(e.dom.host),at=()=>w.fromDom(document),mo=(e,t=!1)=>e.dom.focus({preventScroll:t}),dt=(e=at())=>l.from(e.dom.activeElement).map(w.fromDom),lt=e=>dt(ae(e)).filter(t=>e.dom.contains(t.dom)),q=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},it=(e,t)=>l.from(q(e,t)),mt=(e,t)=>{e.dom.removeAttribute(t)},A=e=>e.style!==void 0&&L(e.style.getPropertyValue),j=e=>{const t=Ze(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return ct(w.fromDom(t)).fold(()=>o.body.contains(t),be(j,ut))},ft=(e,t,o)=>{if(!Se(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);A(e)&&e.style.setProperty(t,o)},yt=(e,t)=>{A(e)&&e.style.removeProperty(t)},fo=(e,t,o)=>{const n=e.dom;ft(n,t,o)},V=(e,t)=>{const o=e.dom,s=window.getComputedStyle(o).getPropertyValue(t);return s===""&&!j(e)?ht(o,t):s},ht=(e,t)=>A(e)?e.style.getPropertyValue(t):"",yo=(e,t)=>{const o=e.dom;yt(o,t),Oe(it(e,"style").map(Re),"")&&mt(e,"style")},pt=(e,t)=>{const o=(r,d)=>{if(!ke(d)&&!d.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+d);const c=r.dom;A(c)&&(c.style[e]=d+"px")},n=r=>{const d=t(r);if(d<=0||d===null){const c=V(r,e);return parseFloat(c)||0}return d},s=n,u=(r,d)=>Fe(d,(c,a)=>{const f=V(r,a),T=f===void 0?0:parseInt(f,10);return isNaN(T)?c:c+T},0);return{set:o,get:n,getOuter:s,aggregate:u,max:(r,d,c)=>{const a=u(r,c);return d>a?d-a:0}}},wt=pt("height",e=>{const t=e.dom;return j(e)?t.getBoundingClientRect().height:t.offsetHeight}),Et=e=>wt.get(e),vt=e=>e.offsetWidth<=0&&e.offsetHeight<=0,gt=e=>!vt(e.dom),de=(e,t)=>o=>Tt(o)==="rtl"?t:e,Tt=e=>V(e,"direction")==="rtl"?"rtl":"ltr",St=(e,t,o,n,s)=>e(o,n)?l.some(o):L(s)&&s(o)?l.none():t(o,n,s),kt=(e,t,o)=>{let n=e.dom;const s=L(o)?o:Me;for(;n.parentNode;){n=n.parentNode;const u=w.fromDom(n);if(t(u))return l.some(u);if(s(u))break}return l.none()},Dt=(e,t,o)=>kt(e,n=>ne(n,t),o),bt=(e,t)=>Ge(t,e),le=(e,t,o)=>St((s,u)=>ne(s,u),Dt,e,t,o),G=(e,t)=>je(t,e),Mt=()=>({get:o=>lt(o),set:(o,n)=>{n.dom.focus()}});var ie=(e=>(e.OnFocusMode="onFocus",e))(ie||{});const i=e=>t=>Pe(e,o=>o.code===t.code||o.key===t.key||o.which===t.which),k=e=>t=>He(e,o=>o(t)),P=e=>e.shiftKey===!0,Nt=e=>e.ctrlKey===!0,X=e=>!P(e),m=(e,t)=>({matches:e,classification:t}),Kt=(e,t)=>x(e,n=>n.matches(t)).map(n=>n.classification),F=(e,t,o,n)=>{const s={...e,focusManager:Mt(),focusInside:ie.OnFocusMode,focusIn:n},u=(c,a,f)=>{const T=f(c,a,s);return Kt(T,a).bind(S=>S(c,a,s))};return{handleKeydown:(c,a)=>u(c,a,t).each(f=>{a.preventDefault(),a.stopPropagation()}),handleKeyup:(c,a)=>u(c,a,o).each(()=>{a.preventDefault(),a.stopPropagation()}),handleFocus:(c,a)=>{n(s).each(f=>{f(c,s),a.preventDefault(),a.stopPropagation()})}}},b=[{code:"Tab",key:"Tab",which:9}],D=[{code:"Enter",key:"Enter",which:13}],me=[{code:"ArrowLeft",key:"ArrowLeft",which:37}],fe=[{code:"ArrowUp",key:"ArrowUp",which:38}],ye=[{code:"ArrowRight",key:"ArrowRight",which:39}],W=[{code:"ArrowDown",key:"ArrowDown",which:40}],M=[{code:"Space",key:" ",which:32}],I=[{code:"Escape",key:"Escape",which:27}],xt=(e,t)=>{const o={...t},n=(r,d,c)=>c.onEscape(r,d),s=g([]),u=g([m(i(I),n)]),y=F(o,s,u,()=>l.none());return{keydown:r=>y.handleKeydown(e,r),keyup:r=>y.handleKeyup(e,r),focus:r=>y.handleFocus(e,r)}},Rt=ue("input"),Ft=e=>q(e,"type")!=="radio",Ht=ue("textarea"),J=e=>Rt(e)&&Ft(e)||Ht(e),Pt=()=>l.some(!0),Lt=(e,t)=>{const o={...t},n=(f,T,S)=>S.doExecute(f,T),s=t.useSpace&&!J(e)?M:[],u=t.useEnter?D:[],y=t.useDown?W:[],r=s.concat(u).concat(y),d=g([m(i(r),n)].concat(t.useControlEnter?[m(k([Nt,i(D)]),n)]:[])),c=g(t.useSpace&&!J(e)?[m(i(M),Pt)]:[]),a=F(o,d,c,()=>l.none());return{keydown:f=>a.handleKeydown(e,f),keyup:f=>a.handleKeyup(e,f),focus:f=>a.handleFocus(e,f)}},he=e=>(t,o,n)=>{const s=e(t);return Ot(s,t,o,n)},At=(e,t)=>{const o=de(e,t);return he(o)},It=(e,t)=>{const o=de(t,e);return he(o)},Ot=(e,t,o,n)=>n.focusManager.get(t).bind(u=>e(t,u,n)).map(u=>(n.focusManager.set(t,u),!0)),_t=(e,t)=>Y(e,t).map(o=>({index:o,candidates:e})),$t=(e,t,o)=>{const n=y=>z(y,t),s=G(e,o),u=Z(s,gt);return _t(u,n)},pe=(e,t,o,n,s)=>{const u=r=>re(r)==="button"&&q(r,"disabled")==="disabled",y=(r,d,c)=>s(r,d,n,0,c.length-1,c[d],a=>u(c[a])?y(r,a,c):l.from(c[a]));return $t(e,o,t).bind(r=>{const d=r.index,c=r.candidates;return y(d,d,c)})},Vt=(e,t,o,n)=>pe(e,t,o,n,(s,u,y,r,d,c,a)=>{const f=Ie(u+y,r,d);return f===s?l.from(c):a(f)}),Ut=(e,t,o,n)=>pe(e,t,o,n,(s,u,y,r,d,c,a)=>{const f=Ae(u,y,r,d);return f===s?l.none():a(f)}),zt=(e,t)=>{const o=h=>(h.dom.click(),l.some(!0)),n=(h,E)=>E.closest?E.focusManager.get(h).bind(p=>le(p,E.selector)):E.focusManager.get(h),s=(h,E,p)=>n(h,p).bind(v=>p.execute(v)),u=(h,E,p)=>n(h,p).bind(v=>p.escape(v)),y=(h,E)=>{bt(h,E.selector).each(p=>{E.focusManager.set(h,p)})},r=h=>(E,p,v)=>(v.cycles?Ut:Vt)(E,v.selector,p,h),d=r(-1),c=r(1),a=h=>(E,p,v)=>h(E,p,v),f=(h,E,p)=>{const v=[...p.allowHorizontal?me:[]].concat(p.allowVertical?fe:[]),C=[...p.allowHorizontal?ye:[]].concat(p.allowVertical?W:[]);return[m(i(v),a(At(d,c))),m(i(C),a(It(d,c))),m(i(D),s),m(i(M),s),m(i(I),u)]},T=g([]),S={execute:o,escape:g(l.none()),allowVertical:!0,allowHorizontal:!0,cycles:!0,focusIn:!1,closest:!0,...t},_=F(S,f,T,()=>ee(S.focusIn,y));return{keydown:h=>_.handleKeydown(e,h),keyup:h=>_.handleKeyup(e,h),focus:h=>_.handleFocus(e,h)}},Bt=(e,t)=>{const o=(r,d,c)=>[m(k([P,i(D)]),c.onShiftEnter),m(k([X,i(D)]),c.onEnter),m(k([P,i(b)]),c.onShiftTab),m(k([X,i(b)]),c.onTab),m(i(fe),c.onUp),m(i(W),c.onDown),m(i(me),c.onLeft),m(i(ye),c.onRight),m(i(M),c.onSpace)],n=(r,d,c)=>[m(i(I),c.onEscape)],s=r=>()=>L(r)?(r(),l.some(!0)):l.none(),u={onSpace:s(t.onSpace),onEnter:s(t.onEnter),onShiftEnter:s(t.onShiftEnter),onTab:s(t.onTab),onShiftTab:s(t.onShiftTab),onLeft:s(t.onLeft),onRight:s(t.onRight),onUp:s(t.onUp),onDown:s(t.onDown),onEscape:s(t.onEscape)},y=F(u,o,n,()=>l.none());return{keydown:r=>y.handleKeydown(e,r),keyup:r=>y.handleKeyup(e,r),focus:r=>y.handleFocus(e,r)}},qt=(e,t,o)=>{const n=$(e.slice(0,t)),s=$(e.slice(t+1));return x(n.concat(s),o)},jt=(e,t,o)=>{const n=$(e.slice(0,t));return x(n,o)},Gt=(e,t,o)=>{const n=e.slice(0,t),s=e.slice(t+1);return x(s.concat(n),o)},Wt=(e,t,o)=>{const n=e.slice(t+1);return x(n,o)},Ct=e=>Et(e)>0,Xt=(e,t)=>{const o=G(e,t.selector),n=Z(o,s=>Ct(s));return l.from(n[t.firstTabstop])},O=(e,t)=>t.closest?t.focusManager.get(e).bind(o=>le(o,t.selector)):t.focusManager.get(e),Jt=(e,t)=>e.useTabstopAt(t),Qt=e=>ot(e).bind(st).exists(t=>z(t,e)),Yt=(e,t)=>{Xt(e,t).each(o=>t.focusManager.set(e,o))},Zt=(e,t,o,n,s)=>s(t,o,u=>Jt(n,u)).fold(()=>n.cyclic?l.some(!0):l.none(),u=>(n.focusManager.set(e,u),l.some(!0))),we=(e,t,o,n)=>{const s=G(e,o.selector);return O(e,o).bind(u=>Y(s,Ke(z,u)).bind(r=>Zt(e,s,r,o,n)))},Ee=(e,t,o)=>{const n=o.cyclic?qt:jt;return we(e,t,o,n)},ve=(e,t,o)=>{const n=o.cyclic?Gt:Wt;return we(e,t,o,n)},eo=(e,t,o)=>O(e,o).filter(n=>!o.useTabstopAt(n)).bind(n=>(Qt(n)?Ee:ve)(e,t,o)),Q=(e,t,o)=>O(e,o).bind(n=>o.execute(n)),to=(e,t,o)=>O(e,o).bind(n=>o.escape(n)),oo=g([m(k([P,i(b)]),Ee),m(i(b),ve),m(i(D),Q),m(i(M),Q),m(i(I),to)]),no=g([m(i(b),eo)]),so=(e,t)=>{const o={execute:g(l.none()),escape:g(l.none()),firstTabstop:0,useTabstopAt:Ne,cyclic:!0,focusIn:!1,closest:!0,...t},n=F(o,oo,no,()=>ee(o.focusIn,Yt));return{keydown:s=>n.handleKeydown(e,s),keyup:s=>n.handleKeyup(e,s),focus:s=>n.handleFocus(e,s)}},H=(e,t)=>(e==null||e.addEventListener("keydown",t.keydown),e==null||e.addEventListener("keyup",t.keyup),e==null||e.addEventListener("focus",t.focus),()=>{e==null||e.removeEventListener("keydown",t.keydown),e==null||e.removeEventListener("keyup",t.keyup),e==null||e.removeEventListener("focus",t.focus)}),ho=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=so(w.fromDom(t.current),e);return H(t.current,o)}else return K},[e])},po=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=zt(w.fromDom(t.current),e);return H(t.current,o)}else return K},[e])},wo=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=Bt(w.fromDom(t.current),e);return H(t.current,o)}else return K},[e])},Eo=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=Lt(w.fromDom(t.current),e);return H(t.current,o)}else return K},[])},vo=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const o=xt(w.fromDom(t.current),e);return H(t.current,o)}else return K},[e])};export{w as S,yo as a,Eo as b,po as c,bt as d,mo as e,st as f,V as g,wo as h,io as i,ho as j,G as k,tt as p,lo as r,fo as s,vo as u};
