import{O as l,g as ge,i as Te,e as L,c as Se,f as ke}from"./Optional-CuHnBc-7.js";import{r as N}from"./iframe-CMvLDBmU.js";import{t as De,b as be,a as Me,c as g,d as Ne,e as Ke,n as K}from"./Fun--VEwoXIw.js";import{m as xe,t as Re,a as Fe,b as He,d as Pe,g as x,h as Y,f as Z,j as $}from"./Strings-CwVUhXDr.js";const Le=typeof window<"u"?window:Function("return this;")(),Ae=(e,t,n,o)=>{const s=e+t;return s>o?n:s<n?o:s},Ie=(e,t,n)=>Math.min(Math.max(e,t),n),dn=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295,Oe=(e,t,n=De)=>e.exists(o=>n(o,t)),ee=(e,t)=>e?l.some(t):l.none(),_e=(e,t)=>{let n=t??Le;for(let o=0;o<e.length&&n!==void 0&&n!==null;++o)n=n[e[o]];return n},te=(e,t)=>{const n=e.split(".");return _e(n,t)},$e=(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,e),new Error(s)}return R(o.childNodes[0])},Ve=(e,t)=>{const o=(t||document).createElement(e);return R(o)},Ue=(e,t)=>{const o=(t||document).createTextNode(e);return R(o)},R=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ze=(e,t,n)=>l.from(e.dom.elementFromPoint(t,n)).map(R),w={fromHtml:$e,fromTag:Ve,fromText:Ue,fromDom:R,fromPoint:ze},Be=9,ne=11,U=1,je=3,oe=(e,t)=>{const n=e.dom;if(n.nodeType!==U)return!1;{const o=n;if(o.matches!==void 0)return o.matches(t);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(t);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(t);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},se=e=>e.nodeType!==U&&e.nodeType!==Be&&e.nodeType!==ne||e.childElementCount===0,qe=(e,t)=>{const n=t===void 0?document:t.dom;return se(n)?[]:xe(n.querySelectorAll(e),w.fromDom)},Ge=(e,t)=>{const n=t===void 0?document:t.dom;return se(n)?l.none():l.from(n.querySelector(e)).map(w.fromDom)},z=(e,t)=>e.dom===t.dom,We=(e,t)=>te(e,t),Ce=(e,t)=>{const n=We(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},Xe=Object.getPrototypeOf,Je=e=>Ce("HTMLElement",e),Qe=e=>{const t=te("ownerDocument.defaultView",e);return ge(e)&&(Je(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Xe(e).constructor.name))},re=e=>e.dom.nodeName.toLowerCase(),Ye=e=>e.dom.nodeType,B=e=>t=>Ye(t)===e,ln=e=>ce(e)&&Qe(e.dom),ce=B(U),Ze=B(je),et=B(ne),ae=e=>t=>ce(t)&&re(t)===e,tt=e=>l.from(e.dom.parentNode).map(w.fromDom),nt=e=>tt(e),ot=(e,t)=>{const n=e.dom.childNodes;return l.from(n[t]).map(w.fromDom)},st=e=>ot(e,0),rt=e=>et(e)&&Te(e.dom.host),ue=e=>w.fromDom(e.dom.getRootNode()),ct=e=>{const t=ue(e);return rt(t)?l.some(t):l.none()},at=e=>w.fromDom(e.dom.host),ut=()=>w.fromDom(document),mn=(e,t=!1)=>e.dom.focus({preventScroll:t}),dt=(e=ut())=>l.from(e.dom.activeElement).map(w.fromDom),lt=e=>dt(ue(e)).filter(t=>e.dom.contains(t.dom)),j=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},it=(e,t)=>l.from(j(e,t)),mt=(e,t)=>{e.dom.removeAttribute(t)},A=e=>e.style!==void 0&&L(e.style.getPropertyValue),q=e=>{const t=Ze(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return ct(w.fromDom(t)).fold(()=>n.body.contains(t),be(q,at))},ft=(e,t,n)=>{if(!Se(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);A(e)&&e.style.setProperty(t,n)},yt=(e,t)=>{A(e)&&e.style.removeProperty(t)},fn=(e,t,n)=>{const o=e.dom;ft(o,t,n)},V=(e,t)=>{const n=e.dom,s=window.getComputedStyle(n).getPropertyValue(t);return s===""&&!q(e)?ht(n,t):s},ht=(e,t)=>A(e)?e.style.getPropertyValue(t):"",yn=(e,t)=>{const n=e.dom;yt(n,t),Oe(it(e,"style").map(Re),"")&&mt(e,"style")},pt=(e,t)=>{const n=(r,d)=>{if(!ke(d)&&!d.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+d);const c=r.dom;A(c)&&(c.style[e]=d+"px")},o=r=>{const d=t(r);if(d<=0||d===null){const c=V(r,e);return parseFloat(c)||0}return d},s=o,a=(r,d)=>Fe(d,(c,u)=>{const f=V(r,u),T=f===void 0?0:parseInt(f,10);return isNaN(T)?c:c+T},0);return{set:n,get:o,getOuter:s,aggregate:a,max:(r,d,c)=>{const u=a(r,c);return d>u?d-u:0}}},wt=pt("height",e=>{const t=e.dom;return q(e)?t.getBoundingClientRect().height:t.offsetHeight}),Et=e=>wt.get(e),vt=e=>e.offsetWidth<=0&&e.offsetHeight<=0,gt=e=>!vt(e.dom),de=(e,t)=>n=>Tt(n)==="rtl"?t:e,Tt=e=>V(e,"direction")==="rtl"?"rtl":"ltr",St=(e,t,n,o,s)=>e(n,o)?l.some(n):L(s)&&s(n)?l.none():t(n,o,s),kt=(e,t,n)=>{let o=e.dom;const s=L(n)?n:Me;for(;o.parentNode;){o=o.parentNode;const a=w.fromDom(o);if(t(a))return l.some(a);if(s(a))break}return l.none()},Dt=(e,t,n)=>kt(e,o=>oe(o,t),n),bt=(e,t)=>Ge(t,e),le=(e,t,n)=>St((s,a)=>oe(s,a),Dt,e,t,n),G=(e,t)=>qe(t,e),Mt=()=>({get:n=>lt(n),set:(n,o)=>{o.dom.focus()}});var ie=(e=>(e.OnFocusMode="onFocus",e))(ie||{});const i=e=>t=>Pe(e,n=>n.code===t.code||n.key===t.key||n.which===t.which),k=e=>t=>He(e,n=>n(t)),P=e=>e.shiftKey===!0,Nt=e=>e.ctrlKey===!0,X=e=>!P(e),m=(e,t)=>({matches:e,classification:t}),Kt=(e,t)=>x(e,o=>o.matches(t)).map(o=>o.classification),F=(e,t,n,o)=>{const s={...e,focusManager:Mt(),focusInside:ie.OnFocusMode,focusIn:o},a=(c,u,f)=>{const T=f(c,u,s);return Kt(T,u).bind(S=>S(c,u,s))};return{handleKeydown:(c,u)=>a(c,u,t).each(f=>{u.preventDefault(),u.stopPropagation()}),handleKeyup:(c,u)=>a(c,u,n).each(()=>{u.preventDefault(),u.stopPropagation()}),handleFocus:(c,u)=>{o(s).each(f=>{f(c,s),u.preventDefault(),u.stopPropagation()})}}},b=[{code:"Tab",key:"Tab",which:9}],D=[{code:"Enter",key:"Enter",which:13}],me=[{code:"ArrowLeft",key:"ArrowLeft",which:37}],fe=[{code:"ArrowUp",key:"ArrowUp",which:38}],ye=[{code:"ArrowRight",key:"ArrowRight",which:39}],W=[{code:"ArrowDown",key:"ArrowDown",which:40}],M=[{code:"Space",key:" ",which:32}],I=[{code:"Escape",key:"Escape",which:27}],xt=(e,t)=>{const n={...t},o=(r,d,c)=>c.onEscape(r,d),s=g([]),a=g([m(i(I),o)]),y=F(n,s,a,()=>l.none());return{keydown:r=>y.handleKeydown(e,r),keyup:r=>y.handleKeyup(e,r),focus:r=>y.handleFocus(e,r)}},Rt=ae("input"),Ft=e=>j(e,"type")!=="radio",Ht=ae("textarea"),J=e=>Rt(e)&&Ft(e)||Ht(e),Pt=()=>l.some(!0),Lt=(e,t)=>{const n={...t},o=(f,T,S)=>S.doExecute(f,T),s=t.useSpace&&!J(e)?M:[],a=t.useEnter?D:[],y=t.useDown?W:[],r=s.concat(a).concat(y),d=g([m(i(r),o)].concat(t.useControlEnter?[m(k([Nt,i(D)]),o)]:[])),c=g(t.useSpace&&!J(e)?[m(i(M),Pt)]:[]),u=F(n,d,c,()=>l.none());return{keydown:f=>u.handleKeydown(e,f),keyup:f=>u.handleKeyup(e,f),focus:f=>u.handleFocus(e,f)}},he=e=>(t,n,o)=>{const s=e(t);return Ot(s,t,n,o)},At=(e,t)=>{const n=de(e,t);return he(n)},It=(e,t)=>{const n=de(t,e);return he(n)},Ot=(e,t,n,o)=>o.focusManager.get(t).bind(a=>e(t,a,o)).map(a=>(o.focusManager.set(t,a),!0)),_t=(e,t)=>Y(e,t).map(n=>({index:n,candidates:e})),$t=(e,t,n)=>{const o=y=>z(y,t),s=G(e,n),a=Z(s,gt);return _t(a,o)},pe=(e,t,n,o,s)=>{const a=r=>re(r)==="button"&&j(r,"disabled")==="disabled",y=(r,d,c)=>s(r,d,o,0,c.length-1,c[d],u=>a(c[u])?y(r,u,c):l.from(c[u]));return $t(e,n,t).bind(r=>{const d=r.index,c=r.candidates;return y(d,d,c)})},Vt=(e,t,n,o)=>pe(e,t,n,o,(s,a,y,r,d,c,u)=>{const f=Ie(a+y,r,d);return f===s?l.from(c):u(f)}),Ut=(e,t,n,o)=>pe(e,t,n,o,(s,a,y,r,d,c,u)=>{const f=Ae(a,y,r,d);return f===s?l.none():u(f)}),zt=(e,t)=>{const n=h=>(h.dom.click(),l.some(!0)),o=(h,E)=>E.closest?E.focusManager.get(h).bind(p=>le(p,E.selector)):E.focusManager.get(h),s=(h,E,p)=>o(h,p).bind(v=>p.execute(v)),a=(h,E,p)=>o(h,p).bind(v=>p.escape(v)),y=(h,E)=>{bt(h,E.selector).each(p=>{E.focusManager.set(h,p)})},r=h=>(E,p,v)=>(v.cycles?Ut:Vt)(E,v.selector,p,h),d=r(-1),c=r(1),u=h=>(E,p,v)=>h(E,p,v),f=(h,E,p)=>{const v=[...p.allowHorizontal?me:[]].concat(p.allowVertical?fe:[]),C=[...p.allowHorizontal?ye:[]].concat(p.allowVertical?W:[]);return[m(i(v),u(At(d,c))),m(i(C),u(It(d,c))),m(i(D),s),m(i(M),s),m(i(I),a)]},T=g([]),S={execute:n,escape:g(l.none()),allowVertical:!0,allowHorizontal:!0,cycles:!0,focusIn:!1,closest:!0,...t},_=F(S,f,T,()=>ee(S.focusIn,y));return{keydown:h=>_.handleKeydown(e,h),keyup:h=>_.handleKeyup(e,h),focus:h=>_.handleFocus(e,h)}},Bt=(e,t)=>{const n=(r,d,c)=>[m(k([P,i(D)]),c.onShiftEnter),m(k([X,i(D)]),c.onEnter),m(k([P,i(b)]),c.onShiftTab),m(k([X,i(b)]),c.onTab),m(i(fe),c.onUp),m(i(W),c.onDown),m(i(me),c.onLeft),m(i(ye),c.onRight),m(i(M),c.onSpace)],o=(r,d,c)=>[m(i(I),c.onEscape)],s=r=>()=>L(r)?(r(),l.some(!0)):l.none(),a={onSpace:s(t.onSpace),onEnter:s(t.onEnter),onShiftEnter:s(t.onShiftEnter),onTab:s(t.onTab),onShiftTab:s(t.onShiftTab),onLeft:s(t.onLeft),onRight:s(t.onRight),onUp:s(t.onUp),onDown:s(t.onDown),onEscape:s(t.onEscape)},y=F(a,n,o,()=>l.none());return{keydown:r=>y.handleKeydown(e,r),keyup:r=>y.handleKeyup(e,r),focus:r=>y.handleFocus(e,r)}},jt=(e,t,n)=>{const o=$(e.slice(0,t)),s=$(e.slice(t+1));return x(o.concat(s),n)},qt=(e,t,n)=>{const o=$(e.slice(0,t));return x(o,n)},Gt=(e,t,n)=>{const o=e.slice(0,t),s=e.slice(t+1);return x(s.concat(o),n)},Wt=(e,t,n)=>{const o=e.slice(t+1);return x(o,n)},Ct=e=>Et(e)>0,Xt=(e,t)=>{const n=G(e,t.selector),o=Z(n,s=>Ct(s));return l.from(o[t.firstTabstop])},O=(e,t)=>t.closest?t.focusManager.get(e).bind(n=>le(n,t.selector)):t.focusManager.get(e),Jt=(e,t)=>e.useTabstopAt(t),Qt=e=>nt(e).bind(st).exists(t=>z(t,e)),Yt=(e,t)=>{Xt(e,t).each(n=>t.focusManager.set(e,n))},Zt=(e,t,n,o,s)=>s(t,n,a=>Jt(o,a)).fold(()=>o.cyclic?l.some(!0):l.none(),a=>(o.focusManager.set(e,a),l.some(!0))),we=(e,t,n,o)=>{const s=G(e,n.selector);return O(e,n).bind(a=>Y(s,Ke(z,a)).bind(r=>Zt(e,s,r,n,o)))},Ee=(e,t,n)=>{const o=n.cyclic?jt:qt;return we(e,t,n,o)},ve=(e,t,n)=>{const o=n.cyclic?Gt:Wt;return we(e,t,n,o)},en=(e,t,n)=>O(e,n).filter(o=>!n.useTabstopAt(o)).bind(o=>(Qt(o)?Ee:ve)(e,t,n)),Q=(e,t,n)=>O(e,n).bind(o=>n.execute(o)),tn=(e,t,n)=>O(e,n).bind(o=>n.escape(o)),nn=g([m(k([P,i(b)]),Ee),m(i(b),ve),m(i(D),Q),m(i(M),Q),m(i(I),tn)]),on=g([m(i(b),en)]),sn=(e,t)=>{const n={execute:g(l.none()),escape:g(l.none()),firstTabstop:0,useTabstopAt:Ne,cyclic:!0,focusIn:!1,closest:!0,...t},o=F(n,nn,on,()=>ee(n.focusIn,Yt));return{keydown:s=>o.handleKeydown(e,s),keyup:s=>o.handleKeyup(e,s),focus:s=>o.handleFocus(e,s)}},H=(e,t)=>(e?.addEventListener("keydown",t.keydown),e?.addEventListener("keyup",t.keyup),e?.addEventListener("focus",t.focus),()=>{e?.removeEventListener("keydown",t.keydown),e?.removeEventListener("keyup",t.keyup),e?.removeEventListener("focus",t.focus)}),hn=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const n=sn(w.fromDom(t.current),e);return H(t.current,n)}else return K},[e])},pn=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const n=zt(w.fromDom(t.current),e);return H(t.current,n)}else return K},[e])},wn=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const n=Bt(w.fromDom(t.current),e);return H(t.current,n)}else return K},[e])},En=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const n=Lt(w.fromDom(t.current),e);return H(t.current,n)}else return K},[])},vn=e=>{N.useEffect(()=>{const{containerRef:t}=e;if(t.current){const n=xt(w.fromDom(t.current),e);return H(t.current,n)}else return K},[e])};export{w as S,yn as a,En as b,pn as c,bt as d,mn as e,st as f,V as g,wn as h,ln as i,hn as j,G as k,tt as p,dn as r,fn as s,vn as u};
